<!DOCTYPE html>
<html>
<head>
<title>mp4</title>
<meta charset="UTF-8">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.js"></script>
</head>
<body>
<div id="dplayer"></div>
<script>
var ls = location.search;
var url = '';
var p = 'https://yked.gitee.io/cai/collectimage/1.jpg';
if (ls.substring(0,5) == "?url="){
    var ls = ls.substring(1,ls.length);
    var arr = ls.split("&");
    var data = new Array();
    for (i in arr){
        //data[arr[i].split("=")[0]]=decodeURIComponent(arr[i].split("=")[1]);
        data[arr[i].split("=")[0]]=arr[i].split("=")[1];
    }
    if (data["url"] != ""){
        url=data["url"];
    }
    if (data["p"] != ""){
        p=data["p"];
    }
    f();
}else if(ls==""){
    var file = document.createElement("INPUT");
    file.type="file";
    file.onchange=function(){
        url=URL.createObjectURL(this.files[0]);
        f();
    };
    document.body.append(file);
    document.body.append(document.createTextNode("本网页支持观看mp4，但手机可能会出现不兼容，如果你想看m3u8和ts请在地址栏的player后加上-m3u8,最好使用一次刷新一次释放内存。"));
}
function f(){
dp = new DPlayer({
    container: document.getElementById('dplayer'),
    video: {
        url: url,
        pic: p,
        type: 'auto'
    },
})}
</script>
</body>
</html>